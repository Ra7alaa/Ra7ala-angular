<div class="login-wrapper">
  <div class="login-left">
    <img
      src="assets/images/bus.svg"
      alt="{{ 'auth.login_image_alt' | translate }}"
      class="login-image"
    />
  </div>
  <div class="login-right">
    <h1 class="logo-text">Ra7ala</h1>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <label>{{ "auth.email_or_username" | translate }}</label>
        <div class="input-wrapper">
          <i class="fa fa-envelope icon"></i>
          <input
            type="text"
            formControlName="emailOrUsername"
            class="form-control email-input"
            placeholder="{{ 'auth.enter_email_or_username' | translate }}"
            [ngClass]="{
              'is-invalid':
                loginForm.get('emailOrUsername')?.invalid &&
                (loginForm.get('emailOrUsername')?.dirty ||
                  loginForm.get('emailOrUsername')?.touched)
            }"
          />
          <div
            class="invalid-feedback"
            *ngIf="
              loginForm.get('emailOrUsername')?.invalid &&
              (loginForm.get('emailOrUsername')?.dirty ||
                loginForm.get('emailOrUsername')?.touched)
            "
          >
            {{ "auth.email_username_required" | translate }}
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>{{ "auth.password" | translate }}</label>
        <div class="input-wrapper">
          <i class="fa fa-lock icon"></i>
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="{{ 'auth.password' | translate }}"
            [ngClass]="{
              'is-invalid':
                loginForm.get('password')?.invalid &&
                (loginForm.get('password')?.dirty ||
                  loginForm.get('password')?.touched)
            }"
          />
          <span class="password-toggle" (click)="togglePasswordVisibility()">
            <i
              class="fa"
              [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"
            ></i>
          </span>
          <div
            class="invalid-feedback"
            *ngIf="
              loginForm.get('password')?.invalid &&
              (loginForm.get('password')?.dirty ||
                loginForm.get('password')?.touched)
            "
          >
            {{ "auth.password_required" | translate }}
          </div>
        </div>
      </div>

      <div class="form-options">
        <div class="remember-me">
          <input type="checkbox" id="remember" />
          <label for="remember">{{ "auth.remember_me" | translate }}</label>
        </div>
        <a routerLink="/auth/forgot-password" class="forgot">
          {{ "auth.forgot_password" | translate }}
        </a>
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>

      <button
        type="submit"
        class="btn-login"
        [disabled]="loginForm.invalid || isSubmitting"
      >
        <span *ngIf="!isSubmitting">{{ "auth.login" | translate }}</span>
        <span *ngIf="isSubmitting">
          <i class="fa fa-spinner fa-spin"></i>
          {{ "auth.logging_in" | translate }}
        </span>
      </button>

      <p class="signup-link">
        {{ "auth.not_member_yet" | translate }}
        <a routerLink="/auth/register">{{
          "auth.create_account" | translate
        }}</a>
      </p>
    </form>
  </div>
</div>

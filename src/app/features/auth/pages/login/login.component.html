<div class="login-wrapper">
  <div class="login-left">
    <img src="assets/images/bus.svg" alt="Login Image" class="login-image" />
  </div>
  <div class="login-right">
    <h1 class="logo-text">Ra7ala</h1>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <label>Email or Username</label>
        <div class="input-wrapper">
          <i class="fa fa-envelope icon"></i>
          <input
            type="text"
            formControlName="emailOrUsername"
            class="form-control email-input"
            placeholder="Enter your Email or Username"
            [ngClass]="{
              'is-invalid':
                loginForm.get('emailOrUsername')?.invalid &&
                (loginForm.get('emailOrUsername')?.dirty ||
                  loginForm.get('emailOrUsername')?.touched)
            }"
          />
          <div
            class="invalid-feedback"
            *ngIf="
              loginForm.get('emailOrUsername')?.invalid &&
              (loginForm.get('emailOrUsername')?.dirty ||
                loginForm.get('emailOrUsername')?.touched)
            "
          >
            Please enter your email or username
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Password</label>
        <div class="input-wrapper">
          <i class="fa fa-lock icon"></i>
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="Password"
            [ngClass]="{
              'is-invalid':
                loginForm.get('password')?.invalid &&
                (loginForm.get('password')?.dirty ||
                  loginForm.get('password')?.touched)
            }"
          />
          <span class="password-toggle" (click)="togglePasswordVisibility()">
            <i
              class="fa"
              [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"
            ></i>
          </span>
          <div
            class="invalid-feedback"
            *ngIf="
              loginForm.get('password')?.invalid &&
              (loginForm.get('password')?.dirty ||
                loginForm.get('password')?.touched)
            "
          >
            Password is required
          </div>
        </div>
      </div>

      <div class="form-options">
        <div class="remember-me">
          <input type="checkbox" id="remember" />
          <label for="remember">Remember Me</label>
        </div>
        <a routerLink="/auth/forgot-password" class="forgot"
          >Forgot Password?</a
        >
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>

      <button
        type="submit"
        class="btn-login"
        [disabled]="loginForm.invalid || isSubmitting"
      >
        <span *ngIf="!isSubmitting">Log In</span>
        <span *ngIf="isSubmitting">
          <i class="fa fa-spinner fa-spin"></i> Logging in...
        </span>
      </button>

      <p class="signup-link">
        Not member yet? <a routerLink="/auth/register">Create an account</a>
      </p>
    </form>
  </div>
</div>
